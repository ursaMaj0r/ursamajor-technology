<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="/assets/css/main.css" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/custom.css"><div>
    <div style="float: left">
        <button class="drac-btn drac-bg-orange-red drac-m-xs drac-m-xxs custom-link-black"><a href="/">Home</a></button>
        <button class="drac-btn drac-bg-orange-red drac-m-xs drac-m-xxs custom-link-black"><a href="/about">About</a></button>
    </div>
    <div>
        <img src="/assets/images/static/logo.png" width="50vw" style="float: right;" /></div>
    <div>
        <h2 class="drac-heading drac-text-orange" style="font-size: calc(10px + 1vw); text-align: right;">
            Ursa Major Technology
        </h2>
        <p class="drac-text drac-text-xs drac-text-right drac-text-orange-red">Consulting, Blogging, and Beyond!</p>
    </div>
</div>
<header>

</header>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P1CNC3J6444"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-P1CNC3J6444');
</script></head>

<body class="drac-bg-black">
  <article itemscope itemtype="http://schema.org/BlogPosting">
  <div style="text-align:center;">
    
    <span><a href="/assets/images/posts/did-you-feed-the-dog/title.png" title="Opening Image"><img src="/assets/images/posts/did-you-feed-the-dog/title.png" width="20%" alt="Did you feed the dog?"></a></span> 
    
  </div>
  <div class=" custom-link-cyan drac-text drac-text-center"><div>
    <div>
        <h2 class="drac-heading drac-heading-md drac-text-orange drac-p-sm">
            Did you feed the dog?
        </h2>
    </div>
    <div class="drac-text drac-text-md drac-text-white">
        Topics: <a href="/category/doggo/" class="drac-text">Doggo</a>, <a href="/category/home-assistant/" class="drac-text">Home Assistant</a>, <a href="/category/nfc-tags/" class="drac-text">NFC Tags</a>,  <a href="/category/smart-home/" class="drac-text">Smart Home</a></div>
</div></div>
  <div>
    <p class="drac-text drac-text-center drac-text-cyan"><time datetime="2021-09-14T21:00:00+00:00" itemprop="datePublished">
        Sep 14, 2021
      </time>
    </p>
  </div>
  <div class="drac-text drac-text-white drac-text-center center drac-text-sm custom-link-cyan" style="width:80%" itemprop="articleBody">
      <p>Have you ever forgotten if you fed the dog breakfast? Or maybe your dog is like mine and is always ready for another meal… Look no further!
<!--more--></p>

  </div>
  <div class="drac-text drac-text-white custom-link-cyan center drac-text-sm" style="width:80%" itemprop="articleBody">
      
<h1 id="background">Background</h1>
<p>Calli the dog has always been motivated by one thing in life: food. In fact, it motivates her so much she has been know to ask for breakfast <em>one human at a time.</em> Like most dogs as soon as someone steps into the kitchen in the morning, Calli knows its time for breakfast. However, she also knows that after a delicious meal, there’s a chance for more. She waits patiently for the next person to make their way down to the kitchen, and you guessed it, “Breakfast Time!?!?!”, she exclaims. We needed another way to keep track of this, so I created a system to sort out this conundrum using Home Assistant, our phones, and some NFC Tags!
<br /><img src="/assets/images/posts/did-you-feed-the-dog/calli-food.png" class="center" width="20%" /></p>

<h2 class="drac-heading drac-heading-xl drac-text-orange">Getting Started</h2>
<h3 id="before-beginning-this-tutorial-please-make-sure-you-have-the-following">Before beginning this tutorial, please make sure you have the following:</h3>
<ul>
  <li>Home Assistant</li>
  <li>NFC Tags –&gt; <a href="https://amzn.to/3tIsnGh">Purchase Here! (paid link)</a>
<br /></li>
</ul>

<h2 class="drac-heading drac-heading-xl drac-text-orange">Creating the Helpers</h2>
<div>
  <div variant="subtle" class="drac-box drac-card drac-card-subtle drac-border-cyan drac-p-md drac-m-md">
    <span class="drac-text drac-line-height drac-text-red">Info: <br /> Helpers are used like environment variables and their state can be read or modified by an automation. Some examples include: Input Boolean, Input Datetime, Input Number, Input Select, Input Text and Counter. For detailed info, please review - <a href="https://www.home-assistant.io/integrations/#automation">Home Assistant Docs</a></span>
    
  </div>
</div>
<p><br /></p>

<p>Let’s start by opening up the menu to create helpers:
<a href="https://my.home-assistant.io/redirect/helpers/"><img src="https://my.home-assistant.io/badges/helpers.svg" alt="Open your Home Assistant instance and show your helper entities." /></a></p>

<p>To create a helper, select <em>Add helper</em> at the bottom right of the page.</p>

<h2 id="helper-1---counter---dog-meal-counter">Helper 1 - Counter - Dog Meal Counter</h2>
<p>The first helper that we create will be a counter. It will be used to keep track of the number of times that we fed our dog and will reset at midnight. It needs to have a maximum value of <strong>2</strong> (or more depending on Fido) and a step size of  <strong>1</strong>.</p>

<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/counter.png" /></p>

<h2 id="helper-2--3---input-boolean---dog-breakfast--dog-dinner">Helper 2 &amp; 3 - Input Boolean - Dog Breakfast &amp; Dog Dinner</h2>
<p>The next two helpers that we need are toggles. They will be used to keep track of which meals our dog has ate. I have named one <strong>Dog Breakfast</strong> and the other <strong>Dog Dinner</strong> (<em>how creative, ik!</em>).</p>

<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/toggle.png" /></p>

<h2 id="setting-up-the-tag" class="drac-heading drac-heading-xl drac-text-orange">Setting up the Tag</h2>
<p>To create a tag, open the configuration menu and select tags:
<a href="https://my.home-assistant.io/redirect/tags/"><img src="https://my.home-assistant.io/badges/tags.svg" alt="Open your Home Assistant instance and show your tags." /></a></p>

<p>Next, click <strong>Add tag</strong> at the bottom right of the page.</p>

<h2 id="tag-1---counter---dog-meal-counter">Tag 1 - Counter - Dog Meal Counter</h2>
<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/tag.png" /></p>

<h3 id="from-your-phone">From your phone:</h3>
<p>Go ahead and grab the tag that you plan on using, name it, and select <strong>create and write</strong>. Finally, to write the information to the tag, simply place your phone on top of it.</p>

<h2 class="drac-heading drac-heading-xl drac-text-orange">Creating the Automations</h2>
<p>I am going to break up each automation into a set of triggers, conditions and actions.</p>
<ul>
  <li><strong>Trigger:</strong> Define what will set the rule off</li>
  <li><strong>Condition:</strong> Define what needs to be in place in order for the action to complete</li>
  <li><strong>Action:</strong> A list of things the rule will actually do</li>
</ul>

<p>Let’s start by opening up the menu to create automations:
<a href="https://my.home-assistant.io/redirect/automations/"><img src="https://my.home-assistant.io/badges/automations.svg" alt="Open your Home Assistant instance and show your automations." /></a></p>

<p>To create an automation, select <em>Add automation</em> at the bottom right of the page.</p>

<h2 id="automation-1---counter---dog-meal-counter">Automation 1 - Counter - Dog Meal Counter</h2>

<h3 id="gui">GUI</h3>
<p>(If you prefer to use YAML, skip to <a href="#code-1">code</a>)</p>

<h4 id="triggers">Triggers</h4>
<p>We will need to select the tag we setup <a href="#setting-up-the-tag">in the previous step</a>. Anytime this tag is scanned, it will kick off the automation.</p>

<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/trigger1.png" /></p>

<h4 id="conditions">Conditions</h4>
<p>Since the dog only eats two meals, we will set a <em>numeric state</em> condition on our counter to <strong>below 2</strong>. This will prevent the automation from running if the dog has already eaten twice.</p>

<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/condition1.png" /></p>

<h4 id="actions">Actions</h4>
<p>For the first action we want the automation to increment the counter (add one to it). This can be done with the <em>call service</em> action type and selecting the <strong>counter.increment</strong> service. Finally, we will want to make sure we target the meal counter.</p>

<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/action1.png" /></p>

<p>Next, we will use a <em>choose</em> action, which acts like a simple if/else statement. If the counter’s value is 1, turn on <strong>Dog Breakfast</strong>, otherwise (else) turn on <strong>Dog Dinner</strong>.</p>

<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/action1-2.png" /></p>

<h3 id="code-1">Code 1</h3>
<p>Here’s the full code of what we just built:
<script src="https://gist.github.com/ursaMaj0r/dcf5c623bbd9860f9182fe26bebcff6f.js"></script></p>

<p>Thats it! Now we can move onto the last automation.</p>

<h2 id="automation-2---counter---dog-meal-counter-reset">Automation 2 - Counter - Dog Meal Counter Reset</h2>

<h3 id="gui-1">GUI</h3>
<p>(If you prefer to use YAML, skip to <a href="#code-2">code</a>)</p>

<h4 id="triggers-1">Triggers</h4>
<p>The trigger for this automation will be of the type <em>time</em> and will be set to <strong>00:00:00</strong>. This means the automation will start everyday at midnight.</p>

<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/trigger2.png" /></p>

<h4 id="conditions-1">Conditions</h4>
<p>We don’t need to set anything here!</p>

<h4 id="actions-1">Actions</h4>

<p>We will need to do three things:</p>
<ul>
  <li>Reset the counter</li>
  <li>Turn off Dog Breakfast</li>
  <li>Turn off Dog Dinner</li>
</ul>

<p>In order to reset the counter we will need to call the <strong>counter.reset</strong> service with the meal counter as the selected target. Finally, in order to turn off the meal switches, you will need to call the <strong>input_boolean.turn_off</strong> service targeted at each switch respectively.</p>

<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/action2.png" /></p>

<h3 id="code-2">Code 2</h3>
<p>Voilà, we have working code!</p>

<script src="https://gist.github.com/ursaMaj0r/cfd12763872bd591322f298e39f4ddec.js"></script>

<h2 class="drac-heading drac-text-center drac-heading-xl drac-text-orange">Wrapping up</h2>

<p class="drac-text drac-text-center">To finish this one off, I created a card on the dashboard so the info is always visible!</p>

<p><img class="center" width="40%" src="/assets/images/posts/did-you-feed-the-dog/card.png" /></p>

<script src="https://gist.github.com/ursaMaj0r/bf31b13f0b8ab4dd9d0b1b87e12a90aa.js"></script>


  </div>
  <a href="/2021/09/14/did-you-feed-the-dog/" hidden></a>
</article>
</body>

<footer style="width: 100%;float:left"><footer>
    <div class="custom-footer custom-link-cyan drac-text drac-text-xs drac-text-center drac-line-height drac-text-cyan drac-p-lg">
        <p>ursamajor.technology © 2021</p>
        <p>Powered by GitHub, <a href="https://www.buymeacoffee.com/ursamajor">Mary Lou's Coffee</a>, and <a href="https://github.com/ursaMaj0r/www-ursamajor-technology">Code</a>.
        </p>
    </div>
    
</footer></footer>


</html>